<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Checkout | VastraTara</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
<div style="position: absolute; top: 20px; right: 20px; z-index: 1000;">
    <button onclick="history.back()" class="btn btn-outline-secondary">
        ‚Üê Back
    </button>
</div>

<div class="container mt-5" style="max-width:700px;">

    <div class="card shadow-sm">
        <div class="card-body">

            <h3 class="text-center mb-2">Checkout</h3>
            <p class="text-center text-muted mb-4">
                Payment Method: <b>Cash on Delivery</b>
            </p>

            <!-- üîπ PRODUCT SUMMARY -->
            {% if products %}
                {% for p in products %}
                <div class="card mb-3">
                    <div class="card-body d-flex align-items-center">

                        <!-- IMAGE -->
                        <img
                            src="{{ url_for('static', filename='images/' + (p.image if p.image else 'no-image.png')) }}"
                            width="80"
                            height="80"
                            class="me-3 rounded"
                            style="object-fit:cover;"
                        >

                        <!-- DETAILS -->
                        <div class="flex-grow-1">
                            <h6 class="mb-1">{{ p.name }}</h6>

                            <p class="text-muted mb-1">
                                Colour: <b>{{ p.colour }}</b>
                            </p>

                            <!-- ‚úÖ QUANTITY -->
                            <p class="mb-1">
                                Quantity: <b>{{ p.quantity }}</b>
                            </p>

                            <!-- ‚úÖ PRICE BREAKDOWN -->
                            <small class="text-muted">
                                ‚Çπ {{ p.price }} √ó {{ p.quantity }}
                            </small>
                        </div>

                        <!-- SUBTOTAL -->
                        <div class="text-end">
                            <p class="fw-bold mb-0">‚Çπ {{ p.subtotal }}</p>
                        </div>

                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-center text-muted">No items selected</p>
            {% endif %}

            <!-- TOTAL -->
            <h5 class="text-end mb-4">
                Total: <span class="fw-bold">‚Çπ {{ total }}</span>
            </h5>

            <!-- üîπ CHECKOUT FORM -->
            <form method="post">

                <input
                    type="text"
                    class="form-control mb-3"
                    name="name"
                    placeholder="Full Name"
                    required
                >

                <input
                    type="tel"
                    class="form-control mb-3"
                    name="phone"
                    placeholder="Mobile Number"
                    pattern="[0-9]{10}"
                    title="Enter 10-digit mobile number"
                    required
                >

                <textarea
                    class="form-control mb-3"
                    name="address"
                    placeholder="Full Delivery Address"
                    rows="3"
                    required
                ></textarea>

                <div class="alert alert-info small">
                    After clicking <b>Place Order</b>, WhatsApp will open.
                    Please tap <b>Send</b> to confirm your order.
                </div>

                <button type="submit" class="btn btn-dark w-100">
                    Place Order
                </button>

            </form>

        </div>
    </div>

</div>

</body>
</html>
